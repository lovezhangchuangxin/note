<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å­¦ä¹  Ajax | keqingçš„ç¬”è®°</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/assets/images/aqing.ico">
    <meta name="description" content="study notes">
    
    <link rel="preload" href="/assets/css/0.styles.bd54a832.css" as="style"><link rel="preload" href="/assets/js/app.388e8b9b.js" as="script"><link rel="preload" href="/assets/js/2.0e0c6dfe.js" as="script"><link rel="preload" href="/assets/js/22.0a704e63.js" as="script"><link rel="prefetch" href="/assets/js/10.b70e4572.js"><link rel="prefetch" href="/assets/js/11.6eabacae.js"><link rel="prefetch" href="/assets/js/12.0c30d09b.js"><link rel="prefetch" href="/assets/js/13.73880b75.js"><link rel="prefetch" href="/assets/js/14.b810035e.js"><link rel="prefetch" href="/assets/js/15.c4b0bfec.js"><link rel="prefetch" href="/assets/js/16.b884542e.js"><link rel="prefetch" href="/assets/js/17.8114bc4a.js"><link rel="prefetch" href="/assets/js/18.68a92e69.js"><link rel="prefetch" href="/assets/js/19.ba9051dc.js"><link rel="prefetch" href="/assets/js/20.45d76f45.js"><link rel="prefetch" href="/assets/js/21.0a0bc75d.js"><link rel="prefetch" href="/assets/js/23.1f5c133a.js"><link rel="prefetch" href="/assets/js/24.8fe89294.js"><link rel="prefetch" href="/assets/js/25.050a0cb9.js"><link rel="prefetch" href="/assets/js/26.5528b268.js"><link rel="prefetch" href="/assets/js/27.8e830639.js"><link rel="prefetch" href="/assets/js/28.8ab3042c.js"><link rel="prefetch" href="/assets/js/29.f24a270d.js"><link rel="prefetch" href="/assets/js/3.d9067db4.js"><link rel="prefetch" href="/assets/js/30.8b079fe7.js"><link rel="prefetch" href="/assets/js/4.2557b634.js"><link rel="prefetch" href="/assets/js/5.89fe225c.js"><link rel="prefetch" href="/assets/js/6.497c19f1.js"><link rel="prefetch" href="/assets/js/7.5dd6fcb5.js"><link rel="prefetch" href="/assets/js/8.a02f3650.js"><link rel="prefetch" href="/assets/js/9.522e0447.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bd54a832.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/images/aqing.png" alt="keqingçš„ç¬”è®°" class="logo"> <span class="site-name can-hide">keqingçš„ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  å¼•å¯¼
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/web/JS/" class="nav-link router-link-active">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/web/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/web/NodeJs/" class="nav-link">
  NodeJs
</a></li><li class="dropdown-item"><!----> <a href="/web/React/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HUST" class="dropdown-title"><span class="title">HUST</span> <span class="arrow down"></span></button> <button type="button" aria-label="HUST" class="mobile-dropdown-title"><span class="title">HUST</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hust/network/" class="nav-link">
  network
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  å¼•å¯¼
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/web/JS/" class="nav-link router-link-active">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/web/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/web/NodeJs/" class="nav-link">
  NodeJs
</a></li><li class="dropdown-item"><!----> <a href="/web/React/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HUST" class="dropdown-title"><span class="title">HUST</span> <span class="arrow down"></span></button> <button type="button" aria-label="HUST" class="mobile-dropdown-title"><span class="title">HUST</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hust/network/" class="nav-link">
  network
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/web/" aria-current="page" class="sidebar-link">web å‰ç«¯ç›¸å…³çŸ¥è¯†</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/web/CSS/" class="sidebar-heading clickable"><span>CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/web/JS/" class="sidebar-heading clickable router-link-active open"><span>JavaScript</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/JS/thisç†è§£.html" class="sidebar-link">thisç†è§£</a></li><li><a href="/web/JS/æ”¹å˜thisæŒ‡å‘.html" class="sidebar-link">æ”¹å˜thisæŒ‡å‘</a></li><li><a href="/web/JS/Polyfillå’Œè½¬è¯‘å™¨.html" class="sidebar-link">Polyfillå’Œè½¬è¯‘å™¨</a></li><li><a href="/web/JS/å­¦ä¹ Ajax.html" class="active sidebar-link">å­¦ä¹ Ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/JS/å­¦ä¹ Ajax.html#_1-åŸç†" class="sidebar-link">1. åŸç†</a></li><li class="sidebar-sub-header"><a href="/web/JS/å­¦ä¹ Ajax.html#_2-xml" class="sidebar-link">2. XML</a></li><li class="sidebar-sub-header"><a href="/web/JS/å­¦ä¹ Ajax.html#_3-http" class="sidebar-link">3. HTTP</a></li><li class="sidebar-sub-header"><a href="/web/JS/å­¦ä¹ Ajax.html#_4-ajax-çš„ä½¿ç”¨" class="sidebar-link">4. Ajax çš„ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/web/JS/å­¦ä¹ Ajax.html#_5-ajax-ä½¿ç”¨è¡¥å……" class="sidebar-link">5. Ajax ä½¿ç”¨è¡¥å……</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/web/Git/" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/web/NodeJs/" class="sidebar-heading clickable"><span>NodeJs</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/web/React/" class="sidebar-heading clickable"><span>React</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="å­¦ä¹ -ajax"><a href="#å­¦ä¹ -ajax" class="header-anchor">#</a> å­¦ä¹  Ajax</h1> <div class="custom-block tip"><p class="custom-block-title">ç®€ä»‹</p> <ul><li>AJAX = Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚</li> <li>AJAX ä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ä½¿ç”¨ç°æœ‰æ ‡å‡†çš„æ–°æ–¹æ³•ã€‚</li> <li><strong>AJAX æœ€å¤§çš„ä¼˜ç‚¹æ˜¯åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µå†…å®¹ã€‚</strong></li> <li>AJAX ä¸éœ€è¦ä»»ä½•æµè§ˆå™¨æ’ä»¶ï¼Œä½†éœ€è¦ç”¨æˆ·å…è®¸ JavaScript åœ¨æµè§ˆå™¨ä¸Šæ‰§è¡Œã€‚</li></ul></div> <h2 id="_1-åŸç†"><a href="#_1-åŸç†" class="header-anchor">#</a> 1. åŸç†</h2> <p>åœ¨å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰å’ŒæœåŠ¡å™¨ä¹‹é—´åŠ äº†ä¸€ä¸ªä¸­é—´å±‚ï¼šAjax å¼•æ“ã€‚ç”± Ajax å¼•æ“ç‹¬ç«‹å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œå‰ç«¯è·å–åˆ° Ajax è¿”å›çš„æ•°æ®åï¼Œå¯ä»¥ä½¿ç”¨æ–°æ•°æ®æ¥æ›´æ–°é¡µé¢ã€æˆ–è¿›è¡Œå…¶å®ƒæ“ä½œï¼Œä½¿ç”¨æˆ·è¯·æ±‚å’ŒæœåŠ¡å™¨å“åº”å¼‚æ­¥åŒ–ï¼Œä»è€Œä¿è¯äº†åœ¨ä¸åˆ·æ–°é¡µé¢çš„å‰æä¸‹å¯ä»¥å±€éƒ¨æ›´æ–°ç½‘é¡µå†…å®¹ã€‚</p> <p>å¦‚æœæœåŠ¡å™¨ç«¯æ”¯æŒ CORSï¼Œå¯ä»¥é€šè¿‡è®¾ç½® Access-Control-Allow-Origin æ¥å®ç°è·¨åŸŸã€‚å¦‚æœæµè§ˆå™¨æ£€æµ‹åˆ°ç›¸åº”çš„è®¾ç½®ï¼Œå°±ä¼šå…è®¸ Ajax è¿›è¡Œè·¨åŸŸè®¿é—®</p> <hr> <p>æˆ‘æš‚æ—¶ä¹Ÿä¸æ˜¯å¾ˆç†è§£ï¼Œä¸è¿‡ä¸å½±å“ä¸‹é¢çš„ä½¿ç”¨ğŸ˜„</p> <h2 id="_2-xml"><a href="#_2-xml" class="header-anchor">#</a> 2. XML</h2> <p>æˆ‘ä»¬æ³¨æ„åˆ°å‰é¢è¯´è¿‡ Ajax = å¼‚æ­¥çš„ Javascript å’Œ XMLï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ XML å‘¢ï¼Ÿ</p> <div class="custom-block tip"><p class="custom-block-title">ç®€ä»‹</p> <p>XML æŒ‡å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆeXtensible Markup Languageï¼‰</p></div> <p>å¦‚æœä½ ç†Ÿæ‚‰ HTML çš„è¯ï¼Œä½ ä¹Ÿä¼šå¯¹ XML æ„Ÿåˆ°äº²åˆ‡ã€‚æ¥çœ‹ä¸‹é¢è¿™æ®µ XML çš„å†™æ³•</p> <div class="language-XML line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>åˆ»æ™´<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">&gt;</span></span>17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>element</span><span class="token punctuation">&gt;</span></span>é›·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>element</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸ HTML ä¸ä¸€æ ·çš„æ˜¯ï¼ŒXML ä¸­çš„æ ‡ç­¾åä¸æ˜¯é¢„å®šä¹‰çš„ï¼Œè€Œæ˜¯è‡ªå®šä¹‰çš„ï¼Œæ˜¯ç”±æˆ‘ä»¬è‡ªå·±å‘½åçš„ã€‚HTML ç”¨äºå‘ˆç°é¡µé¢çš„ç»“æ„ï¼Œè€Œ XML åˆ™è¢«è®¾è®¡ä¸ºè¢«è®¾è®¡ç”¨æ¥ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ã€‚å¦‚æœä½ äº†è§£ JSON çš„è¯ï¼Œä¸Šè¿° XML ä»£ç ç­‰ä»·äºå¦‚ä¸‹çš„ JSON ä»£ç </p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;åˆ»æ™´&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
  <span class="token property">&quot;element&quot;</span><span class="token operator">:</span> <span class="token string">&quot;é›·&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ€»ä¹‹ï¼ŒXML å’Œ JSON æ˜¯å­˜å‚¨ä¼ è¾“æ•°æ®çš„ä¸¤ç§æ–¹æ³•ï¼Œè€Œæ˜¾ç„¶ JSON çš„è¯­æ³•è§„åˆ™ååˆ†ç®€å•ï¼Œå¯ç§°å¾—ä¸Šâ€œä¼˜é›…å®Œç¾â€ï¼ŒåŒæ—¶ç”Ÿæˆå’Œè§£æéƒ½å¾ˆæ–¹ä¾¿ï¼Œç°åœ¨ XML å·²è¢« JSON å–ä»£ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸‹é¢é€šè¿‡ Ajax ä¼ è¾“çš„æ•°æ®ä¸»è¦æ˜¯ JSON æ ¼å¼çš„ã€‚</p> <p>ç®€å•åœ°æ¥è¯´ï¼Œä½¿ç”¨ Ajax å°±æ˜¯æˆ‘ä»¬é€šè¿‡ Javascript å‘æœåŠ¡ç«¯å‘èµ· http è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å¤„ç†æˆ‘ä»¬çš„è¯·æ±‚å¹¶å“åº”ï¼Œå“åº”çš„æ•°æ®ä»¥ JSON æ ¼å¼ï¼ˆä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç­‰å…¶ä»–æ ¼å¼ï¼‰è¿”å›ï¼Œæˆ‘ä»¬å†å°†è¿”å›çš„æ•°æ®æ›´æ–°åˆ°æˆ‘ä»¬çš„é¡µé¢ã€‚</p> <h2 id="_3-http"><a href="#_3-http" class="header-anchor">#</a> 3. HTTP</h2> <p>ä½¿ç”¨ Ajax ä¹‹å‰æˆ‘ä»¬å¿…é¡»ä»€ä¹ˆæ˜¯ HTTP åè®®ï¼Œå¦‚æœä½ è¿˜ä¸çŸ¥é“ HTTP è¯·æ±‚æ–¹å¼ï¼ŒHTTP çŠ¶æ€ç ï¼Œè¯·è‡ªè¡Œä¸Šç½‘æœç´¢å­¦ä¹ ã€‚
å¦‚æœä½ æƒ³æ·±å…¥äº†è§£ï¼Œè¿™é‡Œæœ‰ HTTP çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP" target="_blank" rel="noopener noreferrer">ä¸­æ–‡ MDN æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_4-ajax-çš„ä½¿ç”¨"><a href="#_4-ajax-çš„ä½¿ç”¨" class="header-anchor">#</a> 4. Ajax çš„ä½¿ç”¨</h2> <p>ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬è¦çŸ¥é“ï¼ŒAjax ç”¨äºå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚æ•°æ®å¹¶å®ç°é¡µé¢çš„æ›´æ–°ï¼Œä¸ºäº†æµ‹è¯•æˆ‘ä»¬å†™çš„ Ajax ä»£ç ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯ï¼Œæ¯”å¦‚ä½¿ç”¨<a href="https://www.expressjs.com.cn/" target="_blank" rel="noopener noreferrer">express<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥æ­å»ºï¼Œä½†æ˜¯è¿™æ ·æœ‰äº›éº»çƒ¦ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a href="https://api.apiopen.top/swagger/index.html#/%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/" target="_blank" rel="noopener noreferrer">Swagger å¼€æ”¾æ¥å£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œæˆ‘ä»¬å‘è¿™äº›æ¥å£å‘é€è¯·æ±‚å³å¯å¾—åˆ°å“åº”çš„ç»“æœ</p> <p>å¼€å§‹å†™ Ajax ä»£ç å•¦â¤ï¸</p> <ol><li>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª html æ–‡ä»¶ï¼ŒAjax ä»£ç å°†åœ¨ html æ–‡ä»¶ä¸­ script æ ‡ç­¾ä¸­ä¹¦å†™ã€‚
æˆ‘ä»¬è¦å®ç°çš„åŠŸèƒ½æ˜¯ç‚¹å‡»è·å–åè¨€çš„æŒ‰é’®ï¼Œé¡µé¢ä¸­ä¼šå‘ˆç°ä¸€å¥åè¨€ã€‚
æ³¨æ„æˆ‘ä»¬å¼•å…¥äº† <a href="https://www.bootcss.com/" target="_blank" rel="noopener noreferrer">booststrap<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç”¨äºç¾åŒ–æˆ‘ä»¬çš„é¡µé¢ï¼Œä¸å¿…è¿‡å¤šå…³æ³¨</li></ol> <div class="language-html line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><br><br><br></div><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh-CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Ajaxå­¦ä¹ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¼•å…¥bootstrap --&gt;</span>
    &lt;link rel=&quot;stylesheet&quot;
    href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css&quot;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æ¯æ—¥åè¨€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è·å–åè¨€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ol start="2"><li>ä½¿ç”¨ XMLHttpRequest å¯¹è±¡å‘é€è¯·æ±‚å¤„ç†å“åº”</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// åˆ›å»ºXMLHttpRequestå¯¹è±¡</span>
<span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è®¾ç½®è¯·æ±‚æ–¹æ³•ä¸è¯·æ±‚åœ°å€</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://api.apiopen.top/api/sentences&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å‘é€è¯·æ±‚</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ¥æ”¶å“åº”æ•°æ®</span>
<span class="token comment">// xhrå¯¹è±¡ä¸Šæœ‰readyStateè¿™ä¸ªå±æ€§ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šè°ƒç”¨onreadystatechangeè¿™ä¸ªæ–¹æ³•</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// statuså±æ€§è¡¨ç¤ºè¯·æ±‚çš„çŠ¶æ€ç ï¼Œå¦‚æœæ˜¯200è¡¨ç¤ºè¯·æ±‚æˆåŠŸ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä½¿ç”¨JSON.parseå°†å­—ç¬¦ä¸²è½¬æ¢æˆJSONå¯¹è±¡</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh-CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Ajaxå­¦ä¹ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¼•å…¥bootstrap --&gt;</span>
    &lt;link rel=&quot;stylesheet&quot;
    href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css&quot;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æ¯æ—¥åè¨€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è·å–åè¨€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">function</span> <span class="token function">getQuote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»ºXMLHttpRequestå¯¹è±¡</span>
        <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®è¯·æ±‚æ–¹æ³•ä¸è¯·æ±‚åœ°å€</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://api.apiopen.top/api/sentences&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‘é€è¯·æ±‚</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¥æ”¶å“åº”æ•°æ®</span>
        <span class="token comment">// xhrå¯¹è±¡ä¸Šæœ‰readyStateè¿™ä¸ªå±æ€§ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šè°ƒç”¨onreadystatechangeè¿™ä¸ªæ–¹æ³•</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// statuså±æ€§è¡¨ç¤ºè¯·æ±‚çš„çŠ¶æ€ç ï¼Œå¦‚æœæ˜¯200è¡¨ç¤ºè¯·æ±‚æˆåŠŸ</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// ä½¿ç”¨JSON.parseå°†å­—ç¬¦ä¸²è½¬æ¢æˆJSONå¯¹è±¡</span>
              <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
              document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// è·å–æŒ‰é’®</span>
      <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// ç»™æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶</span>
      btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> getQuote<span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div></details> <p>ä»¥ä¸Šæ˜¯ Ajax çš„åŸºæœ¬ä½¿ç”¨</p> <h2 id="_5-ajax-ä½¿ç”¨è¡¥å……"><a href="#_5-ajax-ä½¿ç”¨è¡¥å……" class="header-anchor">#</a> 5. Ajax ä½¿ç”¨è¡¥å……</h2> <ol><li><strong>open æ–¹æ³•</strong></li></ol> <p>open æ–¹æ³•çš„å®Œæ•´æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š<code>xhr.open(method, url, [async])</code>ã€‚</p> <ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæŒ‡å®š HTTP è¯·æ±‚çš„æ–¹æ³•ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚</li> <li>ç¬¬äºŒä¸ªå‚æ•°ç”¨äºæŒ‡å®š HTTP è¯·æ±‚çš„ URL åœ°å€ï¼Œå¯ä»¥æ˜¯ ç»å¯¹ URL æˆ– ç›¸å¯¹ URLï¼›
ç»å¯¹ URL éœ€è¦æ»¡è¶³åŒæºç­–ç•¥ï¼Œé™¤éæœåŠ¡ç«¯å…è®¸è·¨åŸŸè¯·æ±‚ã€‚ç›¸å¯¹ URL å³æ˜¯ç›¸å¯¹äºæ–‡æ¡£çš„ URLã€‚</li> <li>ç¬¬ä¸‰ä¸ªå‚æ•°å¯é€‰ï¼Œé»˜è®¤ä¸º trueï¼Œè¡¨ç¤ºå¼‚æ­¥è°ƒç”¨æ­¤æ¬¡ Ajax è¯·æ±‚ï¼Œä¸é˜»å¡åç»­è„šæœ¬çš„æ‰§è¡Œ</li></ul> <p>open()æ–¹æ³•å…¶å®è¿˜å¯ä»¥æœ‰ç¬¬å››ã€ç¬¬äº”ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ç”¨äº HTTP è¯·æ±‚è®¿é—®è®¤è¯çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œä½¿ç”¨å®ƒä»¬éœ€è¦åœ¨æœåŠ¡å™¨åšç›¸åº”çš„ç½®ï¼Œè¾ƒä¸ºå°‘ç”¨ã€‚</p> <ol start="2"><li><strong>send æ–¹æ³•</strong></li></ol> <p>å‘é€ GET è¯·æ±‚æ—¶ï¼Œsend æ–¹æ³•ä¸éœ€è¦ä¼ é€’å‚æ•°ï¼ˆä¹Ÿå¯ä»¥ä¼ é€’ nullï¼‰ã€‚å‘é€ POST æ—¶ï¼Œæ•°æ®å¯ä»¥é€šè¿‡ send æ–¹æ³•å‘é€</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è®¾ç½®è¯·æ±‚å¤´</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>
  <span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;application/x-www-form-urlencoded;charset=UTF-8&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;username=123&amp;password=123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li><strong>readyState å±æ€§</strong></li></ol> <p>å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼ŒreadyState æ˜¯ XMLHttpRequest å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºè¡¨ç¤ºè¯·æ±‚æ‰€å¤„çš„çŠ¶æ€ã€‚</p> <blockquote><ul><li>0ï¼šåˆå§‹å€¼ï¼Œè¡¨ç¤ºè¯·æ±‚æœªåˆå§‹åŒ–ï¼Œopen æ–¹æ³•å°šæœªè°ƒç”¨</li> <li>1ï¼šå¯åŠ¨è¯·æ±‚ï¼Œopen æ–¹æ³•å·²ç»è°ƒç”¨ï¼Œä½†å°šæœªè°ƒç”¨ send æ–¹æ³•</li> <li>2ï¼šè¯·æ±‚å‘é€ï¼Œå·²ç»è°ƒç”¨ send æ–¹æ³•ï¼Œä½†å°šæœªæ¥æ”¶åˆ°å“åº”</li> <li>3ï¼šæ¥æ”¶å“åº”ï¼Œå·²ç»æ¥å—åˆ°éƒ¨åˆ†å“åº”æ•°æ®ï¼Œä¸»è¦æ˜¯å“åº”å¤´</li> <li>4ï¼šHTTP å“åº”å®Œæˆï¼Œå·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”æ•°æ®ï¼Œè€Œä¸”å¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨</li></ul> <p>æ¯æ¬¡ reaystate å±æ€§å€¼æ”¹å˜éƒ½ä¼šè§¦å‘ reaystatechange äº‹ä»¶ä½†åªæœ‰ reaystate å±æ€§å€¼ä¸º 4 æ—¶æ‰è¡¨ç¤º HTTP å“åº”å‡†å¤‡å°±ç»ª</p></blockquote> <ol start="4"><li><strong>è®¾ç½®è¯·æ±‚å¤´</strong></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// è®¾ç½®è¯·æ±‚ä½“å†…å®¹çš„ç±»å‹</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span><span class="token string">'application/x-www-from-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è‡ªå®šä¹‰å¤´ä¿¡æ¯</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'ykyk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li><strong>è¯·æ±‚è¶…æ—¶å’Œç½‘ç»œå¼‚å¸¸</strong></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// è¶…æ—¶è®¾ç½® ï¼ˆ2ç§’ï¼‰</span>
xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
<span class="token comment">// è¶…æ—¶å›è°ƒ</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;ç½‘ç»œè¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ç½‘ç»œå¼‚å¸¸å›è°ƒ</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="6"><li>å–æ¶ˆè¯·æ±‚</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ‰‹åŠ¨å–æ¶ˆ</span>
xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="7"><li>è§£å†³ IE ç­‰æµè§ˆå™¨çš„ç¼“å­˜é—®é¢˜</li></ol> <p>åœ¨ä¸€äº›æµè§ˆå™¨ä¸­(å¦‚ IE),ç”±äºç¼“å­˜æœºåˆ¶çš„å­˜åœ¨ï¼Œå¯¹äºç›¸åŒçš„ URLï¼Œajax åªä¼šå‘é€çš„ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œå‰©ä½™å¤šæ¬¡è¯·æ±‚ä¸ä¼šåœ¨å‘é€ç»™æµè§ˆå™¨è€Œæ˜¯ç›´æ¥åŠ è½½ç¼“å­˜ä¸­çš„æ•°æ®ã€‚
è§£å†³çš„æ–¹æ³•å¾ˆç®€å•ï¼Œç»™ URL æ·»åŠ èµ˜ä½™ä¸é‡å¤çš„å‚æ•°å³å¯ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/testAJAX?t=&quot;</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">1 ä¸ªæœˆ</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/web/JS/Polyfillå’Œè½¬è¯‘å™¨.html" class="prev">
        Polyfillå’Œè½¬è¯‘å™¨
      </a></span> <span class="next"><a href="/web/Git/GitåŸºæœ¬ä½¿ç”¨.html">
        GitåŸºæœ¬ä½¿ç”¨
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.388e8b9b.js" defer></script><script src="/assets/js/2.0e0c6dfe.js" defer></script><script src="/assets/js/22.0a704e63.js" defer></script>
  </body>
</html>
